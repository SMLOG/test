(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-common"],{1730:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n("14d9"),n("e9f5"),n("ab43");let o=0;function i(t){const e=window.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility&&"0"!==e.opacity}function r(){function t(t){const e=function(t){const e=[];let n="";for(let o of t)""===o.trim()||/[.,！?;:""]/g.test(o)?(n&&(e.push(n),n=""),e.push(o)):(/\d/.test(o)||"."===o||","===o||"%"===o||n&&(/\d/.test(n)||/,/.test(n)||/%/.test(n))&&(e.push(n),n=""),n+=o);return n&&e.push(n),e}(t.nodeValue).map(t=>t.match(/[a-zA-Z0-9]/)&&`<span class="word" id="word-${o++}">${t}</span>`||`<span class="word2">${t}</span>`).join(""),n=document.createElement("span");return n.innerHTML=e,n}!function e(n){if(n.nodeType===Node.TEXT_NODE){const e=n.parentNode;if(i(e)){const o=t(n);e.replaceChild(o,n)}}else for(let t of n.childNodes)(!t.hasAttribute||!t.hasAttribute("data-no-word")&&i(t))&&e(t)}(document.body)}let a,s,c,l=!1;function u(t){const e=t.getBoundingClientRect(),n=window.innerHeight;if(e.top<0||e.bottom>n){const t=window.scrollY+e.top-n/2+e.height/2;window.scrollTo({top:t,behavior:"smooth"})}}function d(t,e){t.style.borderBottom=e?"2px solid yellow":""}async function p(t){l=!0,a=await async function(t){for(;l;){new Date;s&&d(s,!1);let e=document.querySelector("span#word-"+t++);if(t>o)break;if(e){u(e),d(e,!0),s=e;try{await c({q:e.textContent},!0)}catch(t){}d(e,!1)}}l=!1}(t)}function f(t){r(),c||(c=t,document.body.addEventListener("click",(function(t){if("SPAN"===t.target.tagName&&t.target.classList.contains("word")){let e=function(t){return"2px solid yellow"==t.style.borderBottom}(t.target),n=parseInt(t.target.id.split("-")[1]),o=0;e||(o=1),o?function(t){l?(l=!1,a.then(()=>{p(t)})):p(t)}(n):l=!1}})))}},"1f80":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return g})),n("14d9"),n("e9f5"),n("ab43");const o="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";async function i(t){return new Promise(e=>{setTimeout(()=>{e(t)},t)})}const r={" ":"_",",":"_","!":"_","#":"_","\\":"_","/":"_slash_",":":"_","*":"_","?":"_",'"':"_","<":"_",">":"_","|":"_","\0":"_","%":"_percent"};function a(t){let e=t.toLowerCase().replace(/[^a-z]/gi,"").substring(0,4);return(e.length<4?"":e+"/")+function(t){return t.split("").map(t=>r[t]||t).join("")}(t.replace(/[A-Z]/g,t=>"$"+t))}const s={YD:function(t){let e=t.lang||"en",n=t.content;return"zh"==e?`https://tts.youdao.com/fanyivoice?word=${encodeURIComponent(n)}&le=cn&keyfrom=speaker-target`:"en"==e?`https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(n)}&type=2`:void 0},BD:function(t){let e=t.lang||"en",n=t.speed||5,o=t.content;return`https://fanyi.baidu.com/gettts?lan=${e}&text=${encodeURIComponent(o)}&spd=${n}&source=web`},BK:function(t){let e=t.content;return"https://tts.baidu.com/text2audio?cuid=baike&lan=ZH&ctp=1&pdt=301&vol=9&rate=32&per=0&tex="+encodeURI(e)},SG:function(t){let e=t.content;return`https://fanyi.sogou.com/reventondc/synthesis?text=${encodeURIComponent(e)}&speed=1&lang=zh-CHS&from=translateweb&speaker=1`},LC:function(t){let e=t.content;return`http://localhost:5000/data/audio/us/${a(e)}.mp3?q=${encodeURIComponent(e)}`}};let c=Object.keys(s),l={},u=[],d=[],p=[],f=0;async function m(t){let e=document.querySelector("#bgAudio");e.loop=1,e.src=o,t?e.play():e.pause()}async function h(t,e,n,r){!function(t){f||(window.maudio=t,t.addEventListener("canplaythrough",()=>{t.play()}),t.addEventListener("ended",()=>{for(;u.length;)u.pop()()}),t.addEventListener("loadeddata",()=>{for(;d.length;)d.pop()()}),t.addEventListener("error",()=>{for(;p.length;)p.pop()()})),f=1}(r);try{let o;t||e();let a=n.lang||"en";if("auto"==t){if(o=c.slice(),l[a]){let t=o.indexOf(l[a]);0!=t&&(o.splice(t,1),o.unshift(l[a]))}}else o=t?[t]:[];for(let t=0;t<o.length;t++){let e,c=o[t],f=s[c](n);if(f){for(;r.paused&&r.currentTime>0&&r.currentTime<r.duration;)await i(1e3);if(3e3!=await Promise.race([new Promise(t=>{p.push(()=>{t(3e3)}),e=new Promise(t=>{u.push(()=>{l[a]=c,t(0)})}),d.push((function(){isNaN(r.duration)?t(3e3):t(0)})),r.src=f+"&_tts=1";let n=1;setTimeout(()=>{n&&(r.title="...error",t(3e3))},1e3),r.load();try{r.play()}catch(t){}n=0}),i(3e3)])){if(!await Promise.race([e,i(1e3*(r.duration+1))]))break}}}}catch(t){}r.src=o,r.load(),await i(100),e({})}let V=new Audio;async function g(t,e){let n=Object.keys(s).map(n=>[s[n]({content:t,lan:"en"}),s[n]({content:e,lan:"zh"})]);for(let t=0;t<n.length;t++)for(let e=0;e<n[t].length;e++)await fetch(n[t][e]+"&_tts=1",{mode:"no-cors"}).catch(()=>{}).then(()=>{})}V.muted=1,V.rel="noreferrer",V.src=o,document.addEventListener("click",(function(){V.inited||(V.play(),V.inited=1)})),window.test=g},2934:function(t,e,n){},"34e9":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return d})),n("d9e2"),n("14d9"),n("e9f5"),n("910d"),n("ab43");var o=n("d749"),i=n("ba5f"),r=n("ec3d");async function a(t){if(void 0!==t.audio)return t;let e=await fetch(t.url+"?_=1").then(t=>t.text()),n=new o.a;n.push(e),n.end();var i=n.manifest;if(i.segments&&i.segments.length&&i.segments.filter(t=>t.uri.indexOf(".aac")>-1))return t.audio=t.url,t;let r=i.mediaGroups.AUDIO;r=JSON.stringify(r).replace(/[{}]/g,"").trim();let a=r.match(/uri":\s*"(.*?)"/);return a&&a.length>1?t.audio=t.url+"/../"+a[1]:t.audio=0,t}async function s(t,e,n="en"){if(!t)return;let o=function(t){return t.to.split(";").map(t=>{let e=t.indexOf(".");return e>0&&e<5?t.substring(e+1):t}).join(" ")}(t);return c(n,"en"==n?t.q:o,e,`${t.q}${t.am?" ["+t.am+"]":""} ${o}`)}async function c(t,e,n,o){return new Promise(r=>{Object(i.c)(null,{cmd:"audio",content:e,wait:n,lang:t,title:o},(function(t){t&&r()}))})}async function l(){return c("en","",0,0)}async function u(t,e={},n=1e4){let o=!1;return new Promise((function(i,r){const a=setTimeout((function(){o=!0,r(new Error("Fetch timeout"))}),n);fetch(t,e).then(t=>{clearTimeout(a),o||i(t)}).catch(t=>{o||r(t)})}))}async function d(t){try{let e=localStorage[t]||sessionStorage[t];if(e){let t=e;try{t=Object(r.a)(e)}catch(n){t=Object(r.c)(e)}return t}}catch(t){}return null}},"596c":function(t,e,n){"use strict";(function(t){n("e9f5"),n("910d"),n("f665");var o,i,r=n("2f62"),a=n("1157"),s=n.n(a),c=n("f5ef"),l=n("ba5f"),u=n("1730");window.notinchromeextend=!0,window.$=s.a;let d=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);e.a={data:()=>({list:[]}),created(){},methods:{selectItem(t){this.curItem.to=t.to,this.curItem.n=!this.curItem.n,this.$store.commit("setCurItem",this.curItem),Object(l.c)(null,{cmd:"newWord",content:this.curItem},t=>{t&&this.$store.commit("newWord",t.contents)})},updateItem(){this.curItem.n=!this.curItem.n,this.changeItemNew(this.curItem)},sendMessage(t,e,n){Object(l.c)(t,e,n)},updatePos(){let t=s()(c.a.root);0==t.length&&(t=s()("#root_1"));try{var e=(window.getSelection?window.getSelection().getRangeAt(0):document.selection&&document.selection.createRange()).getBoundingClientRect(),n=d?0:(e.left+e.right)/2+s()(window).scrollLeft()-20;let o=e.bottom+s()(window).scrollTop()+8;n=Math.max(0,n),o=Math.max(0,o),t.css({position:"absolute",top:0,left:0,right:"auto"}),setTimeout(()=>{let e=n+t.offset().left+t.outerWidth()>=s()(window).width(),i=o+t.offset().top+t.outerHeight()>=s()(window).height()+s()(window).scrollTop();e||i?(o=i?s()(window).height()+s()(window).scrollTop()-t.outerHeight():o,t.css({top:o,left:e?"auto":n,right:e?0:"auto"})):t.css({position:"absolute",top:o,left:n,right:"auto"}),this.config.viewMode>-1&&t.css({top:0})},100)}catch(e){t.css({position:"fixed",top:0,left:0,right:"auto"})}this.config.viewMode&&t.css({top:0,position:"absolute"})},clearSelect(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},async playSound(t,e,n){let o=this;return new Promise(r=>{clearTimeout(i),o.autoSound?i=setTimeout(()=>{this.sendMessage(null,{cmd:"audio",content:t.q,wait:e,speeker:n},(function(t){t&&r()}))},100):r()})},onEnterPlay(t,e){(async()=>{var n=!1;if(!t)return;let o=t.target,i=function(){n=!0,o&&t.target.removeEventListener("mouseleave",i)};o&&t.target.addEventListener("mouseleave",i);for(let t=0;t<100;t++){if(n)return;await this.playSound(e,!0)}})()},goto(t,e){let n,o=encodeURIComponent(e.q);n="G"==t?`https://translate.google.cn/?sl=en&tl=zh-CN&text=${o}&op=translate`:"BD"==t?"https://fanyi.baidu.com/#/en/zh/"+o:"http://www.iciba.com/word?w="+o,window.open(n)},getExist(t){let e=this.words,n=t.toLowerCase().trim();for(let t=0;t<e.length;t++)if(e[t].q==n)return e[t];return{n:!1}},tran(){clearTimeout(o),o=setTimeout(()=>{var t=Object(l.a)().toString().replace(/[\r\n]/g," ").replace(/\s+/g," ").trim();if(!t||0==t.length||t.length>this.config.maxTranLen)return;let e=t.trim();if(!/\/\/:/.test(t)){t.length>this.config.maxTranLen&&(t=t.substring(0,this.config.maxTranLen)),this.$store.commit("setShowApp",!0);var n=this,o=this.getExist(t);o=Object.assign({q:t,dt:(new Date).getTime(),am:"",en:"",to:"",_toList:[],errorUrl:""},this.getExist(t)),this.$store.commit("setCurTab","HelloWorld"),this.$store.commit("setCurItem",o),e.length>1&&(this.sendMessage(null,{cmd:"translate",content:o,config:n.config},(function(t){if(t){if(!o.to&&t.length>0){let e=t.filter(t=>null!=t.to);o.to=e.length>0?e[0].to:""}if(!o.en&&t.length>0){let e=t.filter(t=>null!=t.en);o.en=e.length>0?e[0].en:"",o.am=e.length>0?e[0].am:""}o._toList=t,n.$store.commit("setCurItem",o)}})),n.playSound(o))}},500)}},mounted(){let t=this;if(s()(document).on(d?"click":"mouseenter",".newWord",(function(){t.playSound({q:s()(".newWorda",this).text()})})),s()(document).on("click",".newWord",(function(){s()(this).find(".newWordb").toggle()})),Object(l.d)(),document.addEventListener("keydown",t=>{"Control"==t.key&&(s()("html > head #newwordHl").length>0?s()("html > head #newwordHl").remove():s()("html > head").append(s()('<style id="newwordHl" type = "text/css">\n      .newWordb{   display:none;}\n      </style>')))}),d){let t=0;s()(document).on("click",(function(){(new Date).getTime()-t<300&&(s()("html > head #newwordHl").length>0?s()("html > head #newwordHl").remove():s()("html > head").append(s()('<style id="newwordHl" type = "text/css">\n      .newWordb{   display:none;}\n      </style>'))),t=(new Date).getTime()}))}document.addEventListener("mouseup",()=>{setTimeout(()=>{this.config.activeTran&&this.tran()},10)}),document.addEventListener("touchend",()=>{this.tran()}),c.a.$on("play",t=>{this.onEnterPlay(t,this.curItem)});let e=0;document.addEventListener("keyup",t=>{"Control"==t.key?((new Date).getTime()-e<500&&this.$store.commit("config",Object.assign({},this.config,{activeTran:!this.config.activeTran})),e=(new Date).getTime()):e=0})},computed:{...Object(r.b)(["curItem","words","showApp"]),autoSound(){return this.$store.state.config.autoSound},defaultText:()=>t.i18n.getMessage("extName"),_toList(){return this.curItem._toList&&this.curItem._toList.filter?this.curItem._toList.filter(t=>t.to):[]}},watch:{showApp(){this.updatePos()},"$store.state.config.audioRead":{handler(t){t&&Object(u.a)(this.playSound)}}}}}).call(this,n("9845"))},b60c:function(t,e,n){"use strict";function o(t,e){return i(t,e)[0]}function i(t,e){var n=t.reduce((t,e)=>(e.n&&(t[e.q]=e),t),{}),o=t.reduce((t,e)=>(e.n&&t.push(e.q.toLowerCase()),t),[]).sort(),i=t=>{let e=t.toLowerCase();for(var n=0;n<o.length;n++)if(o[n]==e)return!0;return!1};let r=[],a=(t,e)=>(r.push(n[e]),`<em class="newWord"><i class="newWorda">${t}</i><u class="newWordb">${n[e].to} <b class="newWordc">${n[e].am?"["+n[e].am+"]":""}</b></u></em>`);var s=t=>{let e=t.toLowerCase();for(var n=0;n<o.length;n++)if(0==o[n].indexOf(e))return!0;return!1},c=[];let l;for(var u=0,d=0;u<e.length;){var p=e[u];switch(p){case" ":for(d<u&&(l=e.substring(d,u),c.push(l),d=u);" "==e[++u];);l=e.substring(d,u),c.push(l),d=u;break;case"<":for(d<u&&(l=e.substring(d,u),c.push(l),d=u);">"!=e[++u];);l=e.substring(d,++u),c.push(l),d=u;break;default:p>="a"&&p<="z"||p>="A"&&p<="Z"||"-"==p?u++:(d<u&&(l=e.substring(d,u),c.push(l),d=u),c.push(p),d=++u)}}d<=e.length-1&&(l=e.substring(d,e.length),c.push(l));var f=c,m=[];for(let t=0;t<f.length;){let e,o,r;for(e=t+1,o=t;e<=f.length&&(r=f.slice(t,e).filter(t=>-1==t.indexOf("<")).join(""),s(r));)i(r)&&(o=e),++e;if(o>t){r=f.slice(t,o).filter(t=>-1==t.indexOf("<")).join("").toLowerCase();let e=f.slice(t,o).join(""),i=e.split(">");if(i.length%2==0)if(i[0].indexOf("<")>-1){let t=i.shift(),e=i.join(">");m.push(`${t}>${a(e,r)}`)}else{let t=i.pop();t=i.pop();let e=i.join(">");m.push(`${a(e,r)}${t}>`)}else n[r],m.push(""+a(e,r));t=o}else m.push(f.slice(t,t+1).join("")),t++}return[m.join(""),r]}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n("14d9"),n("13d5"),n("e9f5"),n("910d"),n("9485")},ba5f:function(t,e,n){"use strict";n.d(e,"a",(function(){return N})),n.d(e,"d",(function(){return z})),n.d(e,"c",(function(){return E})),n.d(e,"b",(function(){return J})),n("14d9"),n("13d5"),n("e9f5"),n("910d"),n("ab43"),n("9485"),n("b7ef");var o=n("bc3a"),i=n.n(o),r=n("b60c"),a=n("1157"),s=n.n(a),c=n("da7e"),l=n.n(c),u=n("f5ef"),d=n("34e9"),p=n("1f80"),f=(n("d9e2"),n("6821")),m=n.n(f),h=n("ec3d");const V=["20221205001484671","20181025000225318"],g=["Ul_aVRQDvqQJOYHRAKDy","s0rbKVj44RcEH9m4yXrf"];let w=l.a.get("token");if(w){let t=w.split("").map(t=>t.charCodeAt(0));V.push("20220901001327423"),g.push([180,186,227,197,130,183,120,166,148,195,177,172,137,181,132,141,155,194,164,150].map((e,n)=>String.fromCharCode(e-t[n])).join(""))}function y(){return chrome&&chrome.runtime&&chrome.runtime.sendMessage}async function b(t){let e={};{let n=await async function t(e,n){if(g.length<=n)return;let o=(new Date).getTime(),i=V[n],r=g[n];var a=m()(i+e+o+r),c=/[a-zA-Z0-9,.+;!-]/.test(e),l=/[\u4e00-\u9fa5]/.test(e),u=c?"en":l?"zh":"auto",d=c?"zh":"en";let p=y()?"json":"jsonp";for(var f=0;f<1;f++)try{return await new Promise((r,c)=>{s.a.ajax({url:"https://api.fanyi.baidu.com/api/trans/vip/translate",type:"get",dataType:p,jsonpCallback:"jcb",timeout:5e3,cache:1,data:{q:e,appid:i,salt:o,from:u,to:d,sign:a,tts:0,dict:0},success:function(o){!o.trans_result&&o.error_code?setTimeout(()=>{t(e,++n).then(t=>r(t)).catch(t=>c(t))},300):r({q:o.trans_result[0].src,to:o.trans_result[0].dst})},error:function(t){c(t)}})})}catch(t){throw t}}(t,0);n&&(e=Object.assign(e,n))}return e.src="BD",e}var v=n("db49");const j=n("d7ac");let A=0;const _="words",I="nwords";let O="";const C=JSON.parse;let S=s()('<iframe id="myaudio" style="display:none;" referrerpolicy="no-referrer" />');S.appendTo("body");let T=S[0],D=window.document,k=new Audio;k.setAttribute("referrerpolicy","no-referrer"),i.a.defaults.timeout=5e3;let x=[];function $(){for(;x.length>0;){x.pop()({})}}const L={" ":"_",",":"_","!":"_","#":"_","\\":"_","/":"_slash_",":":"_","*":"_","?":"_",'"':"_","<":"_",">":"_","|":"_","\0":"_","%":"_percent"};function q(t){let e=t.toLowerCase().replace(/[^a-z]/gi,"").substring(0,4);return(e.length<4?"":e+"/")+function(t){return t.split("").map(t=>L[t]||t).join("")}(t.replace(/[A-Z]/g,t=>"$"+t))}let R=async function(t,e){if(t){let t="https://json2jsonp.com/?url="+encodeURIComponent(e);return new Promise((e,n)=>{s.a.ajax({url:t,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpCb",cache:1,success:t=>{e(t)},error:t=>{n(t)}})})}return await T.contentWindow.fetch(e,{mode:"cors"}).then(t=>t.json())};const U=[async t=>{let e=y()?"json":"jsonp";return await new Promise((n,o)=>{s.a.ajax({url:"https://fanyi.youdao.com/openapi.do",type:"GET",jsonpCallback:"jcby",cache:1,data:{keyfrom:"wangtuizhijia",key:"1048394636",type:"data",doctype:e,version:"1.1",q:t.q},dataType:e,success:function(t){if(0==t.errorCode){let e={to:t.translation[0],q:t.query,src:"YD"};t.basic&&(e.am=t.basic["uk-phonetic"],e.en=t.basic["us-phonetic"]),e._raw=t,n(e)}else o(t)},error:function(t){n(t)}})})},async t=>await b(t.q),async t=>await async function(t){let e={};return await fetch("https://smlog.github.io/data/BDa/"+t.toLowerCase().substr(0,3).trim()+"/"+t.toLowerCase()+".json").then(t=>t.json()).then(t=>{let n=n=t.anc?Object(h.a)(t.anc):Object(h.b)(t.enc);return n.dict_result?(e.to=n.trans_result.data[0].dst,e.am=n.dict_result.simple_means.symbols[0].ph_am,e.en=n.dict_result.simple_means.symbols[0].ph_en,n.dict_result.simple_means.symbols&&(e.parts=n.dict_result.simple_means.symbols[0].parts)):n.trans_result&&(e.to=n.trans_result.data[0].dst),e._raw=n,e}),e.src="G",e}(t.q),async t=>{let e={src:"Dict"};e.q=t.q;{let n=await R(y()?0:1,`https://dict.iciba.com/dictionary/word/suggestion?word=${encodeURIComponent(t.q)}&nums=1&timestamp=0&is_need_mean=1`);n.message.length>0&&(e.to=n.message[0].paraphrase||n.message[0].means.reduce((t,e)=>t+e.part+" "+e.means.join(","),""),e._raw=n)}return e},async t=>{let e={src:"Local"};e.q=t.q;let n=await R(y()?0:1,"http://localhost:3000/phonetics?q="+encodeURIComponent(t.q));return n&&(e.to=n.trans,e.am=n.uk,e.en=n.us,e._raw=n),e}];function N(){return document.getSelection?document.getSelection():document.selection?document.selection.createRange().text:void 0}function z(){let t=[],e=W();s()((function(){s()("html > head").append(s()('<style type = "text/css">\n        .newWorda{ color: #f73131!important;} \n        .newWordb{ margin-left: 5px;color:brown!important;}\n\n        .custCue .newWorda{ color: #FFF!important;} \n        .custCue .newWordb{ margin-left: 5px;color:#FFF!important;}\n\n        .mousedown .mouseenter .newWordb  {\n          display: none;\n        }</style>'))})),e&&e.transHtml&&(function(t,e){var n=[],o=/\S/;return function t(i){if(3==i.nodeType)(e||o.test(i.nodeValue))&&n.push(i);else for(var r=0,a=i.childNodes.length;r<a;++r)t(i.childNodes[r])}(t),n}(document.body,0).filter(t=>["DIV","P","H1","H2","H3","H4","TD","LI"].indexOf(t.parentElement.tagName)>-1&&t.nodeValue.trim().length>50).map(e=>{t.push(s()(e.parentElement))}),t.length>0&&s()((function(){E(null,{cmd:"lists",type:_,reqId:(new Date).getTime()},e=>{e&&e.contents&&e.contents.length>0&&setTimeout(()=>{t.forEach(t=>{var n=s()(t);n.attr("newword")||(n.each((function(){var t=s()(this).html();if(/[\u4e00-\u9fa5]/.test(t))return!1;t=Object(r.a)(e.contents,t),s()(this).html(t)})),n.data("newword",!0))})},3e3)})})))}const B={};function E(t,e,n){let o=t=>{t&&t.error&&u.a.$emit("error",t),n(t)};return y()?(B[e.reqId||e.cmd]=o,chrome.runtime.sendMessage(t,e,o)):J(t,e,o)}y()&&(window.onMessageListener=function(t,e,n){if(t&&t.cmd){let e=B[t.reqId||t.cmd];e&&e(t.contents)}n(t.contents)},chrome.runtime.onMessage.addListener(window.onMessageListener));let M={post:(t,e)=>{e()},get:(t,e)=>{e(l.a.get(t.name))},token:(t,e)=>{if(t.content){var n="token "+t.content;fetch("https://api.github.com/user",{method:"get",headers:{accept:"application/vnd.github.v3+json",Authorization:n}}).then(t=>t.json()).then(n=>{n.name&&(l.a.set("token",t.content),l.a.set("user",n.name)),e(n)})}else e(l.a.get("user"))},lists:async(t,e)=>{let n={};try{let o=0;if(await async function(t,e,n){let o=(new Date).getTime();if(!W()["show"+t])return;let i="_"+t,r=l.a.get(i)||0;(e||o-r>18e5)&&(await n(),l.a.set(i,o))}(t.type,t.force,()=>{o++,setTimeout(()=>{(async()=>{Z[t.type]&&await Z[t.type](t,e),o--,e({done:!o})})()},1e3)}),t.type==_){let e=K(t.type)||[];for(let t=0,n=e.length;t<n;t++)e[t].i||e[t].n||(e.splice(t,1),n--,t--);X(t.type,e),n.contents=K(t.type)||[];let o=K(I)||[];n.contents.unshift(...o)}else n.contents=await Object(d.d)(t.type);n.done=!o,e(n)}catch(t){u.a.$emit("error",t),n.done=1,e(n)}},newWord:async(t,e)=>{let n={};if(t.content.q=t.content.q.trim(),!t.content.q)return n.error="empty word",void e(n);let o=K(_)||[],i=K(I)||[],r=t.content.q.toLocaleLowerCase(),a=[i,o];for(let t=0;t<a.length;t++){let e=a[t];for(var s=0,c=e.length;s<c;s++)if(e[s].q==r){e.splice(s,1),s--,c--,1==t&&X(_,o),t=a.length;break}}i.unshift(Object.assign({},t.content,{q:r}));try{X(I,i,1)}catch(t){alert(t)}n.contents=t.content,e(n)},translate:(t,e)=>{let n=[];U.map(o=>o(t.content).then(o=>{n.push(o),o&&o._raw&&(t.config&&t.config.tranUrl?(async()=>{delete o._raw.logid;let e=Object(h.d)(JSON.stringify(o._raw));delete o._raw,await fetch(t.config.tranUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({item:t.content,resp:o,enc:JSON.stringify({anc:e})})})})():delete o._raw),e(n)}))},audio:(t,e)=>{if(x.push(e),t.pause||!t.content)return t.pause?(k.pause(),$(),!1):void(k.inited||(k.inited=1,k.src||(k.src=p.a,k.play())));k.title=t.title||t.content.trim(),D.title=k.title;let n=W();Object(p.c)(n.autoSound,$,t,k)},audio2:(t,e)=>{if(x.push(e),t.pause||!t.content)return t.pause?k.pause():k.inited||(k.inited=1,k.src="3s.mp3",k.play()),$(),!1;k.title=t.content.trim(),D.title=k.title;let n=t.lang||"en",o=t.speed||5,i=W(),r=t.content,a=`https://fanyi.baidu.com/gettts?lan=${n}&text=${encodeURIComponent(r)}&spd=${o}&source=web`,s="https://dict.youdao.com/dictvoice?audio="+encodeURIComponent(r)+"&type=2",c=`http://localhost:5000/data/audio/us/${q(r)}.mp3?q=${encodeURIComponent(r)}`;if("BD"==t.speeker||"BD"==i.autoSound||"auto"==i.autoSound&&"YD"!=O)k.src=a;else if("YD"==t.speeker||"YD"==i.autoSound||"auto"==i.autoSound&&"YD"==O){if("en"!=n)return void $();k.src=s}else if("LC"==t.speeker||"LC"==i.autoSound||"auto"==i.autoSound&&"LC"==O){if("en"!=n)return void $();k.src=c}let l=1,u=function(){l=0,$()},d=function(t){if(i.autoSound&&l>0&&l<5){O="BD"==O?"YD":"BD",l++;try{let t="BD"==O?a:s;k.src=t}catch(t){}try{k.play()}catch(t){u()}}else u()};k.onerror=d;let p=setTimeout(()=>{l&&0==k.currentTime&&d()},3e3);if(k.onloadeddata=function(){isNaN(k.duration)||(l=0,clearTimeout(p))},k.onended=u,t.wait){try{k.play()}catch(t){u()}return!0}try{k.play()}catch(t){u()}return!1},setConfig:(t,e)=>{l.a.set("config",Object(h.d)(JSON.stringify(t.content))),e(W())},getConfig:(t,e)=>{(async()=>{let t=W(),n={};if(A)n=A;else{let t="https://smlog.github.io/data/config.";try{n=await s.a.ajax({url:t+"js",dataType:"jsonp",jsonpCallback:"applyConfig"})}catch(e){try{n=await fetch(t+"json").then(t=>t.json())}catch(t){A=0}}A=n}let o=Object.values(t.urls).flat().reduce((t,e)=>(t[e.url]=e.enable,t),{});t=Object.assign(t,n),t.urls&&Object.values(t.urls).flat().map(t=>t.enable=o[t.url]),e(t)})()},urls:(t,e)=>{!async function(t,e){let n="smlog";await H(n,"data",t.content.p,0,t.content.cache).then(t=>{let n=j.ungzip(window.atob(t),{to:"string"});e({content:C(n)})}).catch(()=>{e({content:0})})}(t,e)},mUpload:(t,e)=>{(async()=>{let t=await tt();e(t)})()}};function W(){let t=l.a.get("config");try{t=t&&Object(h.a)(l.a.get("config"))||{}}catch(t){}return t}function J(t,e,n){let o=o=>{y()?chrome.tabs.sendMessage(t.tab.id,{cmd:e.cmd,reqId:e.reqId,contents:o},(function(t){})):n(o)};return M[e.cmd]&&(async()=>{await M[e.cmd](e,o)})(),!0}async function H(t,e,n,o,i){let r=l.a.get("token");var a="token "+r;let s={accept:"application/vnd.github.v3+json"};r&&(s.Authorization=a);let c=`https://api.github.com/repos/${t}/${e}/contents/${n}`+(o?"?ref="+o:"");return c+=i?(c.indexOf("?")>-1?"&":"?")+"cache="+i:"",(await Object(d.b)(c,{method:"get",headers:s},1e4).then(t=>t.json())).content}async function P(t,e,n,o,i){let r=l.a.get("token");var a="token "+r,s=`https://api.github.com/repos/${t}/${e}/contents/${n}`;if(!r)return{error:"token?"};let c=await fetch(s,{method:"get",headers:{accept:"application/vnd.github.v3+json"}}).then(t=>t.json()),u=c.sha;return c=await fetch(s,{method:"put",body:JSON.stringify({message:"update"+new Date,branch:"main",content:Q(i?G(o):o),sha:u}),headers:{accept:"application/vnd.github.v3+json",Authorization:a}}).then(t=>t.json()),c}async function F(){let t=[];try{t=await Object(d.d)("videos")||[]}catch(t){}let e=[],n=t.reduce((t,n)=>(t[n.vid]||t[n.title]||(t[n.vid]=1,t[n.title]=1,e.push(n)),t),{});t=e;let o=W(),i=await Object(v.c)(o);for(let e=0;e<i.length;e++)try{let o=await i[e]();for(let e=0;e<o.length;e++){let i=o[e];n[i.vid]||i.title&&n[i.title.replace(/[^0-9a-z]/gi,"")]||(n[i.vid]=1,i.title&&(n[i.title.replace(/[^0-9a-z]/gi,"")]=1),t.unshift(i))}}catch(t){u.a.$emit("error",t)}return t.sort((t,e)=>e.dt-t.dt),t.length=Math.min(o.retains||200,t.length),t}function Q(t){return btoa(unescape(encodeURIComponent(t)))}function Y(t){return decodeURIComponent(escape(atob(t)))}const Z={words:async(t,e)=>{let n=W(),o=l.a.get("user"),i=o,r="data",a="https://"+i+".github.io/"+r+"/",s="update.json",c=t.type+"Since",u=K(_)||[],d=K(I)||[],p=l.a.get(c),f=+new Date;if(o)try{let t=await fetch(a+"updateIndex.json?t="+f).then(t=>t.json());if(l.a.set("uploadDate",t.date),t.date>p){let e=await fetch(a+"updateData.json?t="+f).then(t=>t.json());t.gz&&(e.words=C(j.ungzip(atob(e.words),{to:"string"}))),u=e.words,p=t.date}else new Date(p).getTime()-new Date(t.date).getTime()>864e6&&(await tt(),t=await fetch(a+"updateIndex.json?t="+f).then(t=>t.json()),p=t.date)}catch(t){}let m=p,h=d.filter(t=>!t.i&&t.n||t.i&&!t.n).map(t=>{for(let e in t)"_"==e[0]&&delete t[e];return t}),V=[],g={},w=m;if(o)try{await async function({name:t,rep:e,path:n,since:o},i,r=!0){var a=`https://api.github.com/repos/${t}/${e}/commits?path=${encodeURIComponent(n)}&per_page=100`;o&&(a+="&since="+encodeURIComponent(o));let s=l.a.get("token");var c="token "+s;let u={accept:"application/vnd.github.v3+json"};s&&(u.Authorization=c);let d=1,p=[];for(;;){let t=await fetch(a+"&page="+d,{method:"get",headers:u});if(200!=t.status)throw await t.json();let e=await t.json();if(p.unshift(...e.reverse()),e.length<100)break;d++}for(let o=0;o<p.length;o++){let a=p[o],s=await H(t,e,n,a.sha);if(await i(a,r?Y(s):s,o))return}return p}({name:i,rep:r,path:s,since:w},(t,e)=>{p=t.commit.committer.date;let n=C(e);w=t.commit.committer.date,V.push(...n)})}catch(t){g.error=t}u.unshift(...V.reverse());let y={},b=[d,u];for(let t=0;t<b.length;t++){let e=b[t];for(let t=0,n=e.length;t<n;t++){let o=e[t];o.q&&!y[o.q]&&o.n||(e.splice(t,1),n--,t--),y[o.q]=(y[o.q]||0)+1}}window.debug&&window.debug("gzipAndStore RWORD"),X(_,u),window.debug&&window.debug("NWORD nwords"),X(I,d,1);let v=d.concat(u);if(p&&l.a.set(c,new Date(new Date(p).getTime()+1e3).toISOString()),window.debug&&window.debug("config.fzWords "+n.fzWords+" "+h.length),n.fzWords>0&&h.length>n.fzWords){let t=h.map(t=>{let e=Object.assign({},t,{i:1});return delete e.errorUrl,e});if(o&&t.length>0){let e=JSON.stringify(t),n=await P(i,r,s,e);window.debug&&window.debug(n),g.error=n.error,n.commit&&(p=new Date(new Date(n.commit.committer.date).getTime()+1e3).toISOString(),l.a.set(c,p),u.unshift(...t.filter(t=>t.n)),X(_,u),d.length=0,window.debug&&window.debug("save NWORD nwords"),X(I,d,1),v=u)}}g.contents=v,e(g)},videos:async(t,e)=>{e({contents:await F(),done:1})}};function G(t){return j.gzip(t,{to:"string"})}function X(t,e,n){localStorage.setItem(t,n?JSON.stringify(e):Object(h.d)(JSON.stringify(e)))}function K(t){let e=localStorage.getItem(t);return e?"["==e[0]?C(e):Object(h.a)(localStorage.getItem(t)):[]}async function tt(){let t=K(_)||[],e=K(I)||[],n=e.filter(t=>!t.i&&t.n||t.i&&!t.n).map(t=>{for(let e in t)"_"==e[0]&&delete t[e];return t}).map(t=>Object.assign({},t,{i:1}));t.unshift(...n);let o=e.concat(t);e.length=0;let i="smlog",r="data",a=await P(i,r,"updateData.json",JSON.stringify({words:o})),s=new Date((new Date).getTime()+1e3).toISOString();return a.commit&&(a=await P(i,r,"updateIndex.json",JSON.stringify({date:s}))),a.commit?(X(_,o),X(I,e,1),l.a.set("uploadDate",s),o):0}window.fetchvideos=F},db49:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return d})),n("14d9"),n("13d5"),n("e9f5"),n("910d"),n("ab43"),n("9485");var o=n("f5ef"),i=n("34e9");const r=new(n("98fc"));const a=function(t){let e=(t.url||t.vid).match(/\d{4}\/\d{2}\/\d{2}/),n=e&&e.length>0&&e[0],o=new Date(n).getTime();return t.d=n,t.dt=o,t.i=0,t},s={crossOrigs:async function(t,e,n){let o=encodeURIComponent;return await Object(i.b)(t?"https://api.allorigins.win/raw?url="+o(e):e,{method:"get",headers:{}}).then(t=>"json"==n?t.json():t.text()).then(t=>"xml"==n?r.xml2js(t):t)},mods:{news:{},videos:{m:{cnn:{enable:1,ext:async function(t){if(t.url)return;var e="https://fave.api.cnn.io/v1/video?id="+t.vid+"&customer=cnn&edition=international&env=prod";let n=await Object(i.b)(e).then(t=>t.json());var r="https://medium.ngtv.io/media/"+n.mediumId+"?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImNubi1jbm4td2ViLTk1am96MCIsIm5ldHdvcmsiOiJjbm4iLCJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJjbm4iLCJpYXQiOjE1MjQ2ODQwMzB9.Uw8riFJwARLjeE35ffMwSa-37RNxCcQUEp2pqwG9TvM";let a=await Object(i.b)(r).then(t=>t.json()),s="",c=navigator.userAgent;s=/ipad|tablet/i.test(c)?"tablet":/mobile/i.test(c)?"phone":"desktop",n.closedCaptions&&n.closedCaptions.types&&(t.cc=n.closedCaptions.types.filter(t=>"webvtt"==t.format&&t.track&&t.track.url)[0].track.url),t.url=a.media[s].unprotected.secureUrl,o.a.$emit("video",t)},res:[{type:"xml",conv:async function(t,e){let n=[];for(let o=0;o<t.videos.video.length;o++){let i=t.videos.video[o],r={vid:i.id,title:i.headline,src:e,duration:i.duration.split(":").map((t,e)=>parseInt(t)*(0==e?1:1==e?60:3600)).reduce((t,e)=>t+e,0)};n.push(a(r))}return n}},{type:"json",conv:async function(t,e){let n=[],o=(new Date).getTime();for(let i=0;i<t.length;i++){let r=t[i],s={vid:r.videoId,title:r.title,src:e,t:o};n.push(a(s))}return n}}]},cbs:{enable:1,res:[{type:"json",crossOrig:1,conv:function(t,e){let n=(new Date).getTime();return t.items.filter(t=>"vod"==t.type&&t.video2).map(t=>a({vid:t.id,url:t.video2,title:t.fulltitle,cc:t.captions,src:e,t:n,duration:t.duration}))}}]},msn:{enable:1,res:[{type:"json",crossOrig:0,conv:function(t,e){let n=(new Date).getTime();return(t.subCards||t[0].subCards).filter(t=>"video"==t.type&&"BuzzVideos"!=t.provider.name).map(t=>{let o=t.videoMetadata.closedCaptions,i=a({vid:t.id,duration:t.videoMetadata.playTime,url:t.externalVideoFiles.sort(t=>t.url.indexOf("m3u8")>-1?-1:0)[0].url,title:t.title,cc:o&&o.length&&o[0].href,src:e,org:t.provider&&t.provider.name});return i.dt=new Date(t.publishedDateTime).getTime(),i.t=n,i.d=[new Date(i.dt)].map(t=>`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()}`).join(""),i})}}]}}}}};async function c(t,e){return s.crossOrigs(1,t,e)}async function l(t){let e=parseInt((new Date).getTime()/72e5),n=Object.keys(s.mods.videos.m),o=[];for(let i=0;i<n.length;i++){let r=n[i];if(!s.mods.videos.m[r].enable)continue;let a=s.mods.videos.m[r].res;for(let n=0;n<a.length;n++){let n=t.urls[r].filter(t=>t.enable);for(let t=0;t<n.length;t++){let i=a[n[t].index?n[t].index:0];try{o.push(async()=>{let o=n[t].url,a=await s.crossOrigs(i.crossOrig,o+"?t="+e,i.type);return await i.conv(a,r)})}catch(t){}}}}return o}async function u(t,e,n){return t.loaded?t:await async function(t,e){if(t&&s.mods.videos.m[t.src]){let n=s.mods.videos.m[t.src].ext;return n&&await n(t,e)}}(t,e)}const d=Object.keys(s.mods.videos.m)},ec3d:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l})),n("2c66"),n("249d"),n("40e9"),n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1");const o=n("d7ac"),i=n("9d5f"),r=n("0675").LZMA_WORKER;function a(t){let e=r.compress(t,9);return e=i.bytesToBase64(new Uint8Array(e)),e}function s(t){return JSON.parse(r.decompress(i.base64ToBytes(t)))}function c(t){return JSON.parse(o.ungzip(t,{to:"string"}))}function l(t){return r.decompress(i.base64ToBytes(t))}},f5ef:function(t,e,n){"use strict";const o=new(n("2b0e").a);e.a=o},f871:function(t,e,n){"use strict";n("2934")},fdab:function(t,e,n){"use strict";var o=n("596c").a,i=(n("f871"),n("2877")),r=Object(i.a)(o,(function(){var t=this,e=t._self._c;return e("div",{ref:"hello",staticStyle:{padding:"5px"},attrs:{"data-no-word":"1"}},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"row",staticStyle:{display:"inline-block"}},[t._v(" "+t._s(t.curItem.q)+" "),t.curItem.am?e("b",[t._v(" ["+t._s(t.curItem.am)+"]")]):t._e(),t.curItem.en!=t.curItem.am?e("b",[t._v(" ["+t._s(t.curItem.en)+"]")]):t._e(),t._e()]),t._e(),t._l(t._toList,(function(n){return e("div",{key:n.src,staticClass:"row",staticStyle:{display:"flex","justify-content":"space-between"}},[e("span",{staticClass:"to",class:{cur:n.to==t.curItem.to},on:{click:function(e){return e.preventDefault(),t.selectItem(n)}}},[t._v(t._s(n.to))]),e("span",{staticClass:"src",staticStyle:{color:"#ccc"},on:{mouseup:function(e){return e.preventDefault(),e.stopPropagation(),t.playSound(n,1,n.src)},click:function(e){return e.preventDefault(),e.stopPropagation(),t.playSound(n,1,n.src)}}},[t._v(t._s(n.src))])])})),t.curItem.error?e("div",{staticClass:"row"},[t._v(t._s(t.curItem.error))]):t._e(),t.curItem.errorUrl?e("div",{staticClass:"row"},[e("a",{attrs:{target:"_blank",href:t.curItem.errorUrl}},[t._v(t._s(t.curItem.errorUrl))])]):t._e()],2)])}),[],!1,null,"0c44612e",null);e.a=r.exports}}]);